#!/bin/bash
case "$1" in
    "init")
        # Handle git init with or without -q flag
        # git init -q (init in current dir, quiet)
        # git init <dir> (init in specified dir)
        # git init -q <dir> (init in specified dir, quiet)
        local dir=""
        shift  # skip "init"
        while [[ $# -gt 0 ]]; do
            case "$1" in
                -q|--quiet) shift ;;  # ignore quiet flag
                *) dir="$1"; shift ;;
            esac
        done
        # If no dir specified, use current directory
        if [[ -z "$dir" ]]; then
            mkdir -p ".git"
            echo "Initialized empty Git repository in .git/"
        else
            mkdir -p "$dir/.git"
            echo "Initialized empty Git repository in $dir/.git/"
        fi
        exit 0
        ;;
    "add")
        exit 0
        ;;
    "commit")
        echo "[master (root-commit) 1234567] Test commit"
        exit 0
        ;;
    "branch")
        if [ "$1" = "branch" ] && [ "$2" = "--show-current" ]; then
            echo "main"
            exit 0
        fi
        if [ "$1" = "branch" ]; then
            echo "* main"
            exit 0
        fi
        ;;
    "diff-index")
        # Pretend working tree is clean
        exit 0
        ;;
    "fetch")
        exit 0
        ;;
    "pull")
        echo "Already up to date."
        exit 0
        ;;
    "push")
        echo "Everything up-to-date"
        exit 0
        ;;
    "ls-remote")
        # Pretend remote branch exists
        exit 0
        ;;
    "rev-list")
        echo "0"
        exit 0
        ;;
esac
# Default: succeed
exit 0
