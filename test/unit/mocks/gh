#!/bin/bash
case "$1" in
    "auth")
        if [ "$2" = "status" ]; then
            echo "github.com
  Logged in to github.com as user (oauth_token)
  Git operations done over the http on api.github.com
  Active user: user
  Token scopes: delete_repo, repo, read:org, gist"
            exit 0
        fi
        if [ "$2" = "refresh" ]; then
            # Mock auth refresh
            echo "Auth refreshed"
            exit 0
        fi
        ;;
    "repo")
        case "$2" in
            "list")
                # Check if --json flag is present
                if [[ "$*" == *"--json"* ]]; then
                    # Output mock JSON data
                    cat <<'JSON_DATA'
[
  {
    "name": "test-repo",
    "nameWithOwner": "user/test-repo",
    "description": "A test repository",
    "visibility": "PUBLIC",
    "primaryLanguage": {"name": "bash"},
    "stargazerCount": 10,
    "forkCount": 2,
    "diskUsage": 100,
    "updatedAt": "2024-01-01T00:00:00Z",
    "createdAt": "2024-01-01T00:00:00Z",
    "isArchived": false,
    "url": "https://github.com/user/test-repo",
    "sshUrl": "git@github.com:user/test-repo.git"
  },
  {
    "name": "private-repo",
    "nameWithOwner": "user/private-repo",
    "description": "A private test repository",
    "visibility": "PRIVATE",
    "primaryLanguage": {"name": "python"},
    "stargazerCount": 5,
    "forkCount": 1,
    "diskUsage": 200,
    "updatedAt": "2024-01-02T00:00:00Z",
    "createdAt": "2024-01-01T00:00:00Z",
    "isArchived": false,
    "url": "https://github.com/user/private-repo",
    "sshUrl": "git@github.com:user/private-repo.git"
  }
]
JSON_DATA
                    exit 0
                elif [ "$3" = "--limit" ]; then
                    # Output mock repository data (non-JSON)
                    echo "user/test-repo"
                    echo "user/private-repo"
                fi
                ;;
            "clone")
                echo "Mock clone of $3"
                exit 0
                ;;
            "create")
                echo "Mock create of $3"
                exit 0
                ;;
            "delete")
                echo "Mock delete of $3"
                exit 0
                ;;
            "edit")
                echo "Mock edit of $3"
                exit 0
                ;;
        esac
        ;;
    "search")
        if [ "$2" = "repos" ]; then
            # Output mock search results as JSON
            cat <<'SEARCH_JSON'
[
  {"fullName": "example/repo1", "description": "Test repo 1", "stargazersCount": 100, "language": "Go"},
  {"fullName": "example/repo2", "description": "Test repo 2", "stargazersCount": 50, "language": "Python"}
]
SEARCH_JSON
        fi
        ;;
    "pr")
        case "$2" in
            "list")
                echo "1\tFix bug\topen"
                echo "2\tAdd feature\tclosed"
                exit 0
                ;;
            "create")
                echo "https://github.com/user/test-repo/pull/1"
                exit 0
                ;;
        esac
        ;;
    "browse")
        # Mock browse - do nothing
        exit 0
        ;;
    "api")
        # Mock API calls
        if [[ "$*" == *"user/starred"* ]]; then
            echo "Mock starred"
            exit 0
        fi
        ;;
esac
exit 0
